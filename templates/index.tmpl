<html>
<head>
    <title>Slides</title>
    <meta charset="utf-8">
    <link href="public/themes/{{ .Theme }}/css/remark.css" media="all" rel="stylesheet" type="text/css" />
    <link href="public/themes/{{ .Theme }}/css/mermaid.css" media="all" rel="stylesheet" type="text/css" />

</head>
<body>

<script src="/public/js/remark-latest.min.js" type="text/javascript"></script>
<script src="/public/js/mermaid.min.js" type="text/javascript"></script>
<script src="/public/js/rawdeflate.js" type="text/javascript"></script>
<script src="/public/js/plantUml.js" type="text/javascript"></script>
<script src="/public/js/jquery-1.9.1.min.js"></script>
<script src="/public/js/remark-zoom.js" type="text/javascript"></script>
<script src="/public/js/remark-macros.js" type="text/javascript"></script>
<script src="/public/js/Chart.min.js" type="text/javascript"></script>
<script src="/public/js/remarkchart.min.js" type="text/javascript"></script>


<script>mermaid.initialize({startOnLoad:true});</script>
<script>
    var mySlidesName = location.search.split('slides=')[1];
    //var mySlidesName = {{ .SlideURI }}

    var slidesName = mySlidesName ? mySlidesName : 'home.md';
    var lastContent = "";
    console.log(mySlidesName);
    console.log(slidesName);

    var slideshow = remark.create({
        sourceUrl: slidesName,
        highlightStyle: 'monokai',
        ratio : {{ .Ratio }},
        navigation: {
            scroll: true,  // disable nagivation using scroll
            highlightLines: true // Highlight background of code lines prefixed with *
        }
    });

     // start remarkchart
        remarkchart.init(slideshow);

    $.ajax({
        url: slidesName,
        success: function( response ) {
            if (lastContent!=response) {
                slideshow.loadFromString(parsePlantUml(response));
                if (m=window.location.hash.match(/\#(\d+)$/)) {
                    console.log("goto slide "+m[1]);
                    slideshow.gotoSlide(m[1]);
                }
                lastContent=response
            }
        }
    });
   // mermaid.initialize({startOnLoad:true});
</script>

</body>
</html>
